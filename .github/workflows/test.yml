name: test
on:
  pull_request:
  push:
    branches:
      - main

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    
    - name: Install dependencies
      run: npm install

    - name: Local action test
      uses: ./
      id: version

    - name: Update buildVersion
      run: echo "Build version is now ${{ steps.version.outputs.version }}"
      
    - name: Commit new buildVersion
      run: |
        git config --global user.email "robertjkeck2@gmail.com"
        git config --global user.name "robertjkeck2"
        git commit -am "Updated buildVersion to ${{ steps.version.outputs.version }}"
        git push origin main

